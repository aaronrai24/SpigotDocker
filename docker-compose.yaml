services:
  minecraft1:
    image: itzg/minecraft-server
    environment:
      EULA: "true"
      TYPE: SPIGOT
      VERSION: "1.21"
      PLUGINS: >-
        https://github.com/aaronrai24/MinecraftInsaneDifficulty/releases/download/v1.0.1/MinecraftInsaneDifficulty.jar
    ports:
      - "25565:25565"
    volumes:
      - data:/data
      # - ./plugin:/data/plugins
  
  ngrok:
    image: ngrok/ngrok
    ports:
      - "4040:4040"
    environment:
      NGROK_PROTOCOL: tcp
      NGROK_PORT: minecraft1:25565
      NGROK_AUTH: $$NGROK_AUTH
    depends_on:
      - minecraft1
volumes:
  data: {}